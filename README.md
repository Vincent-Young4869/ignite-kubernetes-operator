# Ignite Kubernetes Operator Repository

A Kubernetes operator for [Apache Ignite](https://ignite.apache.org/) (or [GridGain Ignite](https://www.gridgain.com/)), implemented in Java. It allows users to manage Ignite applications and their lifecycle through native k8s tooling like kubectl.

(The implementation is based on [Java Operator SDK](https://javaoperatorsdk.io/docs/) and refers to the [flink-kubernetes-operator](https://github.com/apache/flink-kubernetes-operator) project)

## Modules Summary
Currently, the repo includes 3 modules:
- **examples**
  - code examples to deploy ignite resource through fabric8 api
  - sample manifests (`resources/cr/ignite-cluster.yaml`) to deploy ignite resource through `kubectl`
  - sample manifests (`resources/operator`) to deploy ignite operator
  - sample manifests (`resources/samples`) to deploy an ignite cluster without ignite operator (this is currently the common way to deploy ignite cluster, refer to [ignite official doc](https://ignite.apache.org/docs/2.16.0/installation/kubernetes/gke-deployment) for more details)
- **ignite kubernetes operator api**
  - defines ignite crd and its related data model to allow users to manage ignite resource programmatically.
- **ignite operator**
  - the k8s operator implemented based some experience with apache ignite, with the help of josdk.

## Features Summary

- Deploy ignite cluster as a `StatefulSet`, along with:
  - RBAC related resource (`role`, `role binding`, `service account`)
  - `Service` with configurable type
  - `ConfigMap` for ignite configurations
  - `Persistence` volume (optional)
- Upgrade and delete the ignite cluster
- Status update and lifecycle management

## Local Setup
To try the operators locally, there are several tools need to be installed:
- docker
- minikube and kubectl
- colima or docker desktop

The general procedure to run the operator is as follows:
1. start minikube, create CRD. (the CRD manifest can be automatically generated by building the module, under the path: `build/classes/java/main/META-INF/fabric8/<crd_name>.xxx.xxx.yml`)
2. run the operator from IDE, or docker container if operator image is built/already exists
3. create/update/delete the custom resource by applying its manifest. There are 2 ways to operate it, through kubectl and fabric8 api. Please refer to **examples** module for more details